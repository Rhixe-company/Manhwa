{% extends "base.html" %} {% load static i18n %}
<!-- title -->
{% block title %} {% translate 'User:' %} {% translate object.username %} {%endblock title %}
<!-- endtitle -->
{% block content %}
<div class="pt:mt-0 mx-auto flex flex-col items-center justify-center px-2 pt-4 dark:bg-gray-900">
  <!-- Action buttons -->

  <div class="w-full max-w-full space-y-4 rounded-lg bg-white p-3 shadow dark:bg-gray-800 sm:p-4">
    {% if object == request.user %}
    <div class="w-full max-w-full rounded-lg border border-gray-200 bg-white shadow dark:border-gray-700 dark:bg-gray-800">
      <div class="flex justify-end px-4 pt-4">
        <button
          id="dropdownButton"
          data-dropdown-toggle="dropdown"
          class="inline-block rounded-lg p-1.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700"
          type="button"
        >
          <span class="sr-only">Open dropdown</span>
          <svg class="h-5 w-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 3">
            <path d="M2 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6.041 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z" />
          </svg>
        </button>
        <!-- Dropdown menu -->
        <div id="dropdown" class="z-10 hidden w-44 list-none divide-y divide-gray-100 rounded-lg bg-white text-base shadow dark:bg-gray-700">
          <ul class="py-2" aria-labelledby="dropdownButton">
            <li>
              <a href="{% url 'users:update' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white">Edit</a>
            </li>
            <li>
              <a href="{% url 'account_email' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white">E-Mail</a>
            </li>
            <li>
              <a href="{% url 'mfa_index' %}" class="block px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white">MFA</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="flex flex-col items-center pb-10">
        {% if request.user.images %}

        <img
          class="mb-3 h-24 w-24 rounded-full shadow-lg"
          src="{% for data in avatar %}
            {{ data.images.url }}
          {% endfor %}"
          alt="{{ request.user.email }} photo"
        />

        {% endif %}
        <h5 class="mb-1 text-xl font-medium">{{ object.email }}</h5>
        <span class="text-sm text-gray-500 dark:text-gray-400">{{ object.username }}</span>
        <div class="mt-4 flex md:mt-6">
          <a
            href="{% url 'bookmarks:list' %}"
            class="inline-flex items-center rounded-lg bg-blue-700 px-4 py-2 text-center text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
            >Bookmarks</a
          >
          <a
            href="#"
            class="ms-2 rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-900 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:outline-none focus:ring-4 focus:ring-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white dark:focus:ring-gray-700"
            >Comments</a
          >
        </div>
      </div>
    </div>
    {% endif %}
  </div>

  {% if request.user.comments.all %}
  <div class="mt-3 w-full max-w-full space-y-4 rounded-lg bg-white p-3 shadow dark:bg-gray-800 sm:p-4">
    <h5 class="mb-1 text-xl font-medium">Comments</h5>
    <div class="overflow-x-auto">
      <table class="table table-xs">
        <!-- head -->
        <thead class="bg-gray-50 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400">
          <tr>
            <th class="px-1 py-1">Name</th>
            <th class="px-1 py-1">Body</th>
            <th class="px-1 py-1">Chapter Name</th>
            <th class="px-1 py-1">Comic Image</th>
            <th class="px-1 py-1">Published</th>
            <th class="px-1 py-1">Edit</th>
            <th class="px-1 py-1">Delete</th>
          </tr>
        </thead>
        <tbody>
          {% for comment in request.user.comments.all %}
          <!-- row 1 -->
          <tr class="border-b dark:border-gray-700">
            <td class="py-1">{{comment.name|title}}</td>
            <td class="py-1">{{comment.body|safe}}</td>
            <td class="py-1">{{comment.chapter.name|title}}</td>
            <td class="py-1">
              <img src="{{comment.chapter.comic.images.url}}" alt="{{comment.chapter.comic.title}}" />
              {{comment.chapter.name|title}}
            </td>
            <td class="py-1">{{ comment.publish|date:"M-d-Y" }}</td>
            <th class="py-1">
              <button class="btn btn-secondary btn-xs">edit</button>
            </th>
            <th class="py-1">
              <button class="btn-danger btn btn-xs">delete</button>
            </th>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% else %}
  <p>no comments</p>
  {% endif %}
</div>

{% endblock content %}
