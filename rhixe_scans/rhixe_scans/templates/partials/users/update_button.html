{% load static i18n widget_tweaks crispy_forms_tags tailwind_filters %}
<!-- drawer init and show -->
<div class="flex justify-center text-center">
  <button
    id="updateUserButton-{{record.id}}"
    class="mb-2 mr-2 flex rounded-lg bg-primary-700 px-1 py-1 text-sm font-medium text-white hover:bg-primary-800 focus:outline-none focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"
    _="on click add .hidden to #updateUserButton-{{record.id}} then remove  .transition-transform .-translate-x-full from #drawer-update-user-default-{{record.id}}"
    type="button"
  >
    <svg
      class="mr-2 h-4 w-4"
      fill="currentColor"
      viewBox="0 0 20 20"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"
      ></path>
      <path
        fill-rule="evenodd"
        d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"
        clip-rule="evenodd"
      ></path>
    </svg>
    Update
  </button>
</div>

<!-- drawer component -->
<div
  id="drawer-update-user-default-{{record.id}}"
  class="{% if not form.errors %} {% endif %} fixed left-0 top-0 z-40 h-screen w-full max-w-md -translate-x-full overflow-y-auto bg-white p-4 transition-transform dark:bg-gray-800"
  tabindex="-1"
  aria-labelledby="drawer-label"
  aria-hidden="true"
>
  <div
    hx-get="{% url 'users:update-user'  record.id %}"
    hx-target="#updateForm-{{record.id}}"
    hx-trigger="intersect"
  >
    <h5
      id="drawer-label"
      class="mb-6 inline-flex items-center text-sm font-semibold uppercase text-gray-500 dark:text-gray-400"
    >
      Update User
    </h5>
    <button
      type="button"
      aria-controls="drawer-update-user-default-{{record.id}}"
      class="absolute right-2.5 top-2.5 inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white"
      _="on click remove .hidden from #updateUserButton-{{record.id}} then add  .transition-transform .-translate-x-full to #drawer-update-user-default-{{record.id}} then put '' into <textarea />'s value then put '' into <input />'s value then put '' into <select />'s value"
    >
      <svg
        aria-hidden="true"
        class="h-5 w-5"
        fill="currentColor"
        viewBox="0 0 20 20"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
          clip-rule="evenodd"
        ></path>
      </svg>
      <span class="sr-only">Close menu</span>
    </button>
    {% block Usersupdate %}
    <form
      id="updateForm-{{record.id}}"
      hx-post="{{record.update_absolute_url}}"
      hx-encoding="multipart/form-data"
      hx-target="#updateForm-{{record.id}}"
      _="on user_added remove .hidden from #updateUserButton-{{record.id}} then add  .transition-transform .-translate-x-full to #drawer-update-user-default-{{record.id}} then put '' into <textarea />'s value then put '' into <input />'s value then put '' into <select />'s value"
    >
      <div>
        <div class="grid grid-cols-6 gap-6">
          <div class="col-span-6 sm:col-span-3">
            {{ form.email|add_label_class:"form-label" }}
            <!-- email input -->
            {% render_field form.email %}
            <span class="ml-3 text-sm text-gray-400">
              {{ form.email.help_text }}
            </span>
            <div class="ml-3 text-xs text-red-400">{{ form.email.errors }}</div>
          </div>
          <div class="col-span-6 sm:col-span-3">
            {{ form.username|add_label_class:"form-label" }}
            <!-- username input -->
            {% render_field form.username %}
            <span class="ml-3 text-sm text-gray-400">
              {{ form.username.help_text }}
            </span>
            <div class="ml-3 text-xs text-red-400">
              {{ form.username.errors }}
            </div>
          </div>
          <div class="col-span-6 sm:col-span-3">
            {{ form.first_name|add_label_class:"form-label" }}
            <!-- first_name input -->
            {% render_field form.first_name %}
            <span class="ml-3 text-sm text-gray-400">
              {{ form.first_name.help_text }}
            </span>
            <div class="ml-3 text-xs text-red-400">
              {{ form.first_name.errors }}
            </div>
          </div>
          <div class="col-span-6 sm:col-span-3">
            {{ form.last_name|add_label_class:"form-label" }}
            <!-- last_name input -->
            {% render_field form.last_name %}
            <span class="ml-3 text-sm text-gray-400">
              {{ form.last_name.help_text }}
            </span>
            <div class="ml-3 text-xs text-red-400">
              {{ form.last_name.errors }}
            </div>
          </div>
          <div class="col-span-6">
            {{ form.images|add_label_class:"form-label" }}
            <!-- images input -->
            {% render_field form.images class="form-files" %}
            <span class="ml-3 text-sm text-gray-400">
              {{ form.images.help_text }}
            </span>
            <div class="ml-3 text-xs text-red-400">
              {{ form.images.errors }}
            </div>
          </div>
          <div class="col-span-6 sm:col-span-3">
            {{ form.is_staff|add_label_class:"form-label" }}
            <!-- is_staff input -->
            {% render_field form.is_staff %}
            <span class="ml-3 text-sm text-gray-400">
              {{ form.is_staff.help_text }}
            </span>
            <div class="ml-3 text-xs text-red-400">
              {{ form.is_staff.errors }}
            </div>
          </div>
          <div class="col-span-6 sm:col-span-3">
            {{ form.is_superuser|add_label_class:"form-label" }}
            <!-- is_superuser input -->
            {% render_field form.is_superuser %}
            <span class="ml-3 text-sm text-gray-400">
              {{ form.is_superuser.help_text }}
            </span>
            <div class="ml-3 text-xs text-red-400">
              {{ form.is_superuser.errors }}
            </div>
          </div>

          <div class="col-span-6">
            {{ form.captcha|add_label_class:"form-label" }}
            <!-- captcha input -->
            {% render_field form.captcha %}
            <span class="ml-3 text-sm text-gray-400">
              {{ form.captcha.help_text }}
            </span>
            <div class="ml-3 text-xs text-red-400">
              {{ form.captcha.errors }}
            </div>
          </div>
        </div>
      </div>
      <div
        class="left-0 mt-4 flex w-full justify-center space-x-4 pb-4 sm:absolute sm:mt-0 sm:px-4"
      >
        <button
          type="submit"
          class="w-full justify-center rounded-lg bg-primary-700 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-primary-800 focus:outline-none focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"
        >
          Update
        </button>
        <button
          type="button"
          class="inline-flex w-full items-center justify-center rounded-lg border border-red-600 px-5 py-2.5 text-center text-sm font-medium text-red-600 hover:bg-red-600 hover:text-white focus:outline-none focus:ring-4 focus:ring-red-300 dark:border-red-500 dark:text-red-500 dark:hover:bg-red-600 dark:hover:text-white dark:focus:ring-red-900"
        >
          <svg
            aria-hidden="true"
            class="-ml-1 mr-1 h-5 w-5"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
              clip-rule="evenodd"
            ></path>
          </svg>
          Delete
        </button>
      </div>
    </form>
    {% endblock Usersupdate %}
  </div>
</div>
